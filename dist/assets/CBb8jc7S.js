import{j as n,m as d,A as p}from"./DXSTB80B.js";import{u as v,r as u}from"./gFfKhp4p.js";import{g as f}from"./uetzOJTg.js";import"./DqliOerU.js";class w{constructor(){this.audioContext=null,this.enabled=!0,this.volume=.5,this.enabled=localStorage.getItem("qquiz_sound_enabled")!=="false";const t=localStorage.getItem("qquiz_sound_volume");t&&(this.volume=parseFloat(t))}getContext(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&this.audioContext.resume(),this.audioContext}setEnabled(t){this.enabled=t,localStorage.setItem("qquiz_sound_enabled",String(t))}setVolume(t){this.volume=Math.max(0,Math.min(1,t)),localStorage.setItem("qquiz_sound_volume",String(this.volume))}isEnabled(){return this.enabled}getVolume(){return this.volume}playCorrect(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime;[523.25,659.25,783.99].forEach((i,s)=>{const o=t.createOscillator(),l=t.createGain();o.type="sine",o.frequency.setValueAtTime(i,e+s*.08),l.gain.setValueAtTime(0,e+s*.08),l.gain.linearRampToValueAtTime(this.volume*.3,e+s*.08+.02),l.gain.exponentialRampToValueAtTime(.001,e+s*.08+.3),o.connect(l),l.connect(t.destination),o.start(e+s*.08),o.stop(e+s*.08+.35)})}playWrong(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime,a=t.createOscillator(),i=t.createGain();a.type="sawtooth",a.frequency.setValueAtTime(300,e),a.frequency.linearRampToValueAtTime(200,e+.3),i.gain.setValueAtTime(this.volume*.2,e),i.gain.exponentialRampToValueAtTime(.001,e+.4),a.connect(i),i.connect(t.destination),a.start(e),a.stop(e+.45)}playTick(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime,a=t.createOscillator(),i=t.createGain();a.type="sine",a.frequency.setValueAtTime(800,e),i.gain.setValueAtTime(this.volume*.1,e),i.gain.exponentialRampToValueAtTime(.001,e+.05),a.connect(i),i.connect(t.destination),a.start(e),a.stop(e+.06)}playTimerUrgent(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime,a=t.createOscillator(),i=t.createGain();a.type="square",a.frequency.setValueAtTime(880,e),i.gain.setValueAtTime(this.volume*.15,e),i.gain.exponentialRampToValueAtTime(.001,e+.12),a.connect(i),i.connect(t.destination),a.start(e),a.stop(e+.15)}playLevelUp(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime;[523.25,587.33,659.25,783.99,1046.5].forEach((i,s)=>{const o=t.createOscillator(),l=t.createGain();o.type="sine",o.frequency.setValueAtTime(i,e+s*.12),l.gain.setValueAtTime(0,e+s*.12),l.gain.linearRampToValueAtTime(this.volume*.25,e+s*.12+.03),l.gain.exponentialRampToValueAtTime(.001,e+s*.12+.4),o.connect(l),l.connect(t.destination),o.start(e+s*.12),o.stop(e+s*.12+.45)})}playCombo(t){if(!this.enabled)return;const e=this.getContext(),a=e.currentTime,i=440+t*100,s=e.createOscillator(),o=e.createGain();s.type="sine",s.frequency.setValueAtTime(i,a),s.frequency.linearRampToValueAtTime(i*1.5,a+.15),o.gain.setValueAtTime(this.volume*.2,a),o.gain.exponentialRampToValueAtTime(.001,a+.25),s.connect(o),o.connect(e.destination),s.start(a),s.stop(a+.3)}playClick(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime,a=t.createOscillator(),i=t.createGain();a.type="sine",a.frequency.setValueAtTime(600,e),i.gain.setValueAtTime(this.volume*.08,e),i.gain.exponentialRampToValueAtTime(.001,e+.04),a.connect(i),i.connect(t.destination),a.start(e),a.stop(e+.05)}playVictory(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime;[{freq:523.25,time:0,dur:.15},{freq:659.25,time:.15,dur:.15},{freq:783.99,time:.3,dur:.15},{freq:1046.5,time:.45,dur:.4},{freq:783.99,time:.65,dur:.15},{freq:1046.5,time:.8,dur:.5}].forEach(i=>{const s=t.createOscillator(),o=t.createGain();s.type="sine",s.frequency.setValueAtTime(i.freq,e+i.time),o.gain.setValueAtTime(0,e+i.time),o.gain.linearRampToValueAtTime(this.volume*.25,e+i.time+.02),o.gain.exponentialRampToValueAtTime(.001,e+i.time+i.dur),s.connect(o),o.connect(t.destination),s.start(e+i.time),s.stop(e+i.time+i.dur+.05)})}playDefeat(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime;[392,349.23,329.63,261.63].forEach((i,s)=>{const o=t.createOscillator(),l=t.createGain();o.type="sine",o.frequency.setValueAtTime(i,e+s*.2),l.gain.setValueAtTime(0,e+s*.2),l.gain.linearRampToValueAtTime(this.volume*.2,e+s*.2+.03),l.gain.exponentialRampToValueAtTime(.001,e+s*.2+.35),o.connect(l),l.connect(t.destination),o.start(e+s*.2),o.stop(e+s*.2+.4)})}playCountdown(t){if(!this.enabled)return;const e=this.getContext(),a=e.currentTime,i=t===0?1046.5:440,s=e.createOscillator(),o=e.createGain();s.type=t===0?"sine":"triangle",s.frequency.setValueAtTime(i,a),o.gain.setValueAtTime(this.volume*.25,a),o.gain.exponentialRampToValueAtTime(.001,a+(t===0?.5:.2)),s.connect(o),o.connect(e.destination),s.start(a),s.stop(a+(t===0?.55:.25))}playNotification(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime;[880,1108.73].forEach((a,i)=>{const s=t.createOscillator(),o=t.createGain();s.type="sine",s.frequency.setValueAtTime(a,e+i*.1),o.gain.setValueAtTime(this.volume*.15,e+i*.1),o.gain.exponentialRampToValueAtTime(.001,e+i*.1+.2),s.connect(o),o.connect(t.destination),s.start(e+i*.1),s.stop(e+i*.1+.25)})}playSelect(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime,a=t.createOscillator(),i=t.createGain();a.type="sine",a.frequency.setValueAtTime(500,e),a.frequency.linearRampToValueAtTime(700,e+.1),i.gain.setValueAtTime(this.volume*.12,e),i.gain.exponentialRampToValueAtTime(.001,e+.15),a.connect(i),i.connect(t.destination),a.start(e),a.stop(e+.2)}playXP(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime,a=t.createOscillator(),i=t.createGain();a.type="sine",a.frequency.setValueAtTime(1200,e),i.gain.setValueAtTime(this.volume*.1,e),i.gain.exponentialRampToValueAtTime(.001,e+.1),a.connect(i),i.connect(t.destination),a.start(e),a.stop(e+.12)}playBadgeUnlocked(){if(!this.enabled)return;const t=this.getContext(),e=t.currentTime;[523.25,783.99,1046.5,1318.5].forEach((i,s)=>{const o=t.createOscillator(),l=t.createGain();o.type="sine",o.frequency.setValueAtTime(i,e+s*.1),l.gain.setValueAtTime(0,e+s*.1),l.gain.linearRampToValueAtTime(this.volume*.2,e+s*.1+.02),l.gain.exponentialRampToValueAtTime(.001,e+s*.1+.5),o.connect(l),l.connect(t.destination),o.start(e+s*.1),o.stop(e+s*.1+.55)})}}const m=new w;function T(){const r=[{name:"KingQuiz243",level:18,avatar:"KQ",league:"diamond",country:"ðŸ‡¨ðŸ‡©"},{name:"BrainStorm",level:22,avatar:"BS",league:"legend",country:"ðŸ‡«ðŸ‡·"},{name:"QuizNinja",level:15,avatar:"QN",league:"platinum",country:"ðŸ‡§ðŸ‡ª"},{name:"MindReader",level:12,avatar:"MR",league:"gold",country:"ðŸ‡¸ðŸ‡³"}],t=[{name:"Rap",image:"Cat_Rap.png"},{name:"Football",image:"Cat_Sport.png"},{name:"Manga",image:"Cat_Manga.png"},{name:"NBA",image:"Cat_NBA.png"}];return r.map((e,a)=>({id:`challenge_${a}`,challenger:e,category:t[a%t.length].name,categoryImage:t[a%t.length].image,status:"pending",createdAt:new Date(Date.now()-Math.random()*36e5),expiresAt:new Date(Date.now()+36e5)}))}function j({challenge:r,onAccept:t,onDecline:e}){const a={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-cyan-600",diamond:"from-blue-400 to-purple-500",legend:"from-fuchsia-500 to-violet-600"},i=s=>{const o=Date.now()-s.getTime(),l=Math.floor(o/6e4);return l<1?"A l'instant":l<60?`Il y a ${l}min`:`Il y a ${Math.floor(l/60)}h`};return n.jsxs(d.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:"bg-gradient-to-r from-slate-800/80 to-slate-900/80 backdrop-blur-lg rounded-2xl p-4 border border-violet-500/20 shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${a[r.challenger.league]||a.bronze} flex items-center justify-center text-white font-bold text-sm shadow-lg`,children:r.challenger.avatar}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-white font-bold text-sm",children:r.challenger.name}),n.jsx("span",{className:"text-lg",children:r.challenger.country})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[n.jsxs("span",{children:["Niv. ",r.challenger.level]}),n.jsx("span",{children:"Â·"}),n.jsx("span",{children:i(r.createdAt)})]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:f(`/images/categories/${r.categoryImage}`),alt:r.category,className:"w-10 h-10 rounded-lg object-cover"}),n.jsx("span",{className:"text-[10px] text-white/60 mt-1 block",children:r.category})]})]}),n.jsx("div",{className:"bg-violet-500/10 rounded-xl p-3 mb-3 border border-violet-500/10",children:n.jsxs("p",{className:"text-white/80 text-sm text-center font-medium",children:["Te dÃ©fie en ",n.jsx("span",{className:"text-violet-400 font-bold",children:r.category})," !"]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(d.button,{whileTap:{scale:.95},onClick:()=>{m.playClick(),e(r.id)},className:"flex-1 py-2.5 rounded-xl bg-slate-700/50 text-white/60 font-semibold text-sm border border-slate-600/30 active:bg-slate-600/50",children:"Refuser"}),n.jsx(d.button,{whileTap:{scale:.95},onClick:()=>{m.playSelect(),t(r.id)},className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white font-bold text-sm shadow-lg shadow-violet-500/30 active:from-violet-700 active:to-fuchsia-700",children:"Accepter"})]})]})}function C({isOpen:r,onClose:t,onSend:e}){const[a,i]=u.useState(""),s=[{id:"rap",name:"Rap",image:"Cat_Rap.png"},{id:"sport",name:"Sport",image:"Cat_Sport.png"},{id:"manga",name:"Manga",image:"Cat_Manga.png"},{id:"nba",name:"NBA",image:"Cat_NBA.png"},{id:"afrique",name:"Afrique",image:"Cat_Afrique.png"},{id:"netflix",name:"Netflix",image:"Cat_Netflix.png"},{id:"football_africain",name:"Foot Africain",image:"Cat_FootballAfricain.png"},{id:"kpop",name:"K-Pop",image:"Cat_Kpop.png"},{id:"tiktok",name:"TikTok",image:"Cat_TikTok.png"},{id:"marvel",name:"Marvel",image:"Cat_Marvel.png"}];return r?n.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",onClick:t,children:n.jsx(d.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"bg-gradient-to-b from-slate-800 to-slate-900 rounded-t-3xl sm:rounded-3xl w-full max-w-md max-h-[80vh] overflow-y-auto border border-violet-500/20",onClick:o=>o.stopPropagation(),children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-white text-center mb-1",children:"Lancer un DÃ©fi"}),n.jsx("p",{className:"text-white/50 text-sm text-center mb-6",children:"Choisis une catÃ©gorie pour dÃ©fier un joueur"}),n.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:s.map(o=>n.jsxs(d.button,{whileTap:{scale:.95},onClick:()=>{m.playClick(),i(o.id)},className:`p-3 rounded-xl border-2 transition-all ${a===o.id?"border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20":"border-slate-700 bg-slate-800/50"}`,children:[n.jsx("img",{src:f(`/images/categories/${o.image}`),alt:o.name,className:"w-12 h-12 mx-auto rounded-lg object-cover mb-2"}),n.jsx("span",{className:"text-white text-xs font-semibold",children:o.name})]},o.id))}),n.jsx(d.button,{whileTap:{scale:.95},onClick:()=>{a&&(m.playSelect(),e(a))},disabled:!a,className:`w-full py-3.5 rounded-xl font-bold text-white transition-all ${a?"bg-gradient-to-r from-violet-600 to-fuchsia-600 shadow-lg shadow-violet-500/30":"bg-slate-700 opacity-50"}`,children:"Envoyer le DÃ©fi"}),n.jsxs("div",{className:"mt-4 text-center",children:[n.jsx("p",{className:"text-white/40 text-xs mb-2",children:"ou partage un lien de dÃ©fi"}),n.jsx(d.button,{whileTap:{scale:.95},onClick:()=>{m.playClick(),navigator.share?navigator.share({title:"QQUIZ PRODIGY - DÃ©fi",text:"Je te dÃ©fie sur QQUIZ PRODIGY ! Viens me battre !",url:window.location.origin}):navigator.clipboard.writeText(`${window.location.origin} - Je te dÃ©fie sur QQUIZ PRODIGY !`)},className:"px-6 py-2 rounded-xl bg-slate-700/50 text-white/60 text-sm font-medium border border-slate-600/30",children:"Copier le lien"})]})]})})}):null}function q(){const r=v(),[t,e]=u.useState([]),[a,i]=u.useState(!1),[s,o]=u.useState("received");u.useEffect(()=>{e(T())},[]);const l=c=>{m.playSelect();const h=t.find(x=>x.id===c);h&&r(`/play?category=${h.category}&mode=duel`)},y=c=>{m.playClick(),e(h=>h.filter(x=>x.id!==c))},b=c=>{m.playNotification(),i(!1)},g=t.filter(c=>c.status==="pending");return n.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950",children:[n.jsx("div",{className:"sticky top-0 z-40 bg-slate-950/80 backdrop-blur-xl border-b border-violet-500/10",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-lg mx-auto",children:[n.jsx(d.button,{whileTap:{scale:.9},onClick:()=>r(-1),className:"w-10 h-10 rounded-full bg-slate-800/50 flex items-center justify-center text-white/70",children:n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("h1",{className:"text-lg font-bold text-white",style:{fontFamily:"Orbitron, sans-serif"},children:"DÃ‰FIS"}),n.jsx(d.button,{whileTap:{scale:.9},onClick:()=>i(!0),className:"w-10 h-10 rounded-full bg-gradient-to-r from-violet-600 to-fuchsia-600 flex items-center justify-center text-white shadow-lg shadow-violet-500/30",children:n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:n.jsx("path",{d:"M12 5v14M5 12h14"})})})]})}),n.jsxs("div",{className:"max-w-lg mx-auto p-4",children:[n.jsx("div",{className:"flex gap-2 mb-6",children:["received","sent"].map(c=>n.jsx(d.button,{whileTap:{scale:.95},onClick:()=>{m.playClick(),o(c)},className:`flex-1 py-2.5 rounded-xl font-semibold text-sm transition-all ${s===c?"bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white shadow-lg":"bg-slate-800/50 text-white/50 border border-slate-700/30"}`,children:c==="received"?`ReÃ§us (${g.length})`:"EnvoyÃ©s"},c))}),n.jsx(p,{mode:"popLayout",children:s==="received"&&g.length>0?n.jsx("div",{className:"space-y-3",children:g.map(c=>n.jsx(j,{challenge:c,onAccept:l,onDecline:y},c.id))}):n.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-slate-800/50 flex items-center justify-center",children:n.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"text-violet-400/50",children:[n.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),n.jsx("path",{d:"M9 9l6 6M15 9l-6 6"})]})}),n.jsx("p",{className:"text-white/40 text-sm",children:s==="received"?"Aucun dÃ©fi en attente":"Aucun dÃ©fi envoyÃ©"}),n.jsx(d.button,{whileTap:{scale:.95},onClick:()=>i(!0),className:"mt-4 px-6 py-2.5 rounded-xl bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white font-semibold text-sm shadow-lg shadow-violet-500/30",children:"Lancer un DÃ©fi"})]})}),n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"DÃ©fi Rapide"}),n.jsxs(d.button,{whileTap:{scale:.98},onClick:()=>{m.playSelect(),r("/play?mode=random")},className:"w-full p-4 rounded-2xl bg-gradient-to-r from-orange-500/20 to-red-500/20 border border-orange-500/20 flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center shadow-lg",children:n.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",children:n.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"text-white font-bold text-sm",children:"Adversaire AlÃ©atoire"}),n.jsx("p",{className:"text-white/50 text-xs",children:"Trouve un adversaire en quelques secondes"})]}),n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-white/40",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),n.jsx(p,{children:a&&n.jsx(C,{isOpen:a,onClose:()=>i(!1),onSend:b})})]})}export{q as default};
