import{j as e,P as j,I as N,V as w,h as T,i as k}from"./B678M3Go.js";import{r}from"./gFfKhp4p.js";function D({conversationId:U="global",currentUserId:o="user1",onSendMessage:l}){const[n,c]=r.useState([{id:"1",senderId:"user2",senderName:"ProGamer243",senderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=ProGamer243",content:"Salut ! PrÃªt pour un duel ? ðŸŽ®",messageType:"text",timestamp:new Date(Date.now()-3e5),isOwn:!1},{id:"2",senderId:o,senderName:"Toi",senderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=You",content:"Ouais, let's go ! ðŸ”¥",messageType:"text",timestamp:new Date(Date.now()-12e4),isOwn:!0}]),[i,p]=r.useState(""),[a,m]=r.useState(!1),x=r.useRef(null),d=r.useRef(null),f=()=>{var s;(s=x.current)==null||s.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{f()},[n]);const u=()=>{if(!i.trim())return;const s={id:Date.now().toString(),senderId:o,senderName:"Toi",senderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=You",content:i,messageType:"text",timestamp:new Date,isOwn:!0};c([...n,s]),p(""),l&&l(i)},v=async s=>{var g;const t=(g=s.target.files)==null?void 0:g[0];t&&(m(!0),setTimeout(()=>{const h=t.type.startsWith("image/")?"image":t.type.startsWith("video/")?"video":"file",b={id:Date.now().toString(),senderId:o,senderName:"Toi",senderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=You",content:t.name,messageType:h,mediaUrl:URL.createObjectURL(t),timestamp:new Date,isOwn:!0};c([...n,b]),m(!1),l&&l(t.name,b.mediaUrl,h)},1500))},y=s=>s.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900",children:[e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-lg border-b border-purple-500/20 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=ProGamer243",alt:"Avatar",className:"w-12 h-12 rounded-full border-2 border-purple-500"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-gray-800"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:"ProGamer243"}),e.jsx("p",{className:"text-xs text-green-400",children:"En ligne"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(s=>e.jsxs("div",{className:`flex gap-3 ${s.isOwn?"flex-row-reverse":"flex-row"}`,children:[e.jsx("img",{src:s.senderAvatar,alt:s.senderName,className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsxs("div",{className:`flex flex-col ${s.isOwn?"items-end":"items-start"} max-w-[70%]`,children:[e.jsxs("div",{className:`rounded-2xl px-4 py-2 ${s.isOwn?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-white"}`,children:[s.messageType==="text"&&e.jsx("p",{className:"text-sm",children:s.content}),s.messageType==="image"&&s.mediaUrl&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:s.mediaUrl,alt:"Shared",className:"rounded-lg max-w-full h-auto"}),e.jsx("p",{className:"text-xs opacity-75",children:s.content})]}),s.messageType==="video"&&s.mediaUrl&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("video",{src:s.mediaUrl,controls:!0,className:"rounded-lg max-w-full h-auto"}),e.jsx("p",{className:"text-xs opacity-75",children:s.content})]})]}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:y(s.timestamp)})]})]},s.id)),e.jsx("div",{ref:x})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-lg border-t border-purple-500/20 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:d,onChange:v,accept:"image/*,video/*",className:"hidden"}),e.jsx("button",{onClick:()=>{var s;return(s=d.current)==null?void 0:s.click()},disabled:a,className:"p-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-purple-400 transition-colors disabled:opacity-50",children:e.jsx(j,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{var s;return(s=d.current)==null?void 0:s.click()},disabled:a,className:"p-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-purple-400 transition-colors disabled:opacity-50",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx("button",{disabled:a,className:"p-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-purple-400 transition-colors disabled:opacity-50",children:e.jsx(w,{className:"w-5 h-5"})}),e.jsx("button",{disabled:a,className:"p-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-purple-400 transition-colors disabled:opacity-50",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:i,onChange:s=>p(s.target.value),onKeyPress:s=>s.key==="Enter"&&u(),placeholder:"Ã‰cris un message...",disabled:a,className:"flex-1 bg-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),e.jsx("button",{onClick:u,disabled:!i.trim()||a,className:"p-2 rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(k,{className:"w-5 h-5"})})]}),a&&e.jsx("div",{className:"mt-2 text-sm text-purple-400 animate-pulse",children:"Upload en cours..."})]})]})}export{D as default};
