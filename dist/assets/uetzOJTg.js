const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DrymYHtk.js","assets/DXSTB80B.js","assets/gFfKhp4p.js","assets/BUQ2MZlT.js","assets/DNo-iq03.js","assets/DqliOerU.js","assets/P-cpHFxZ.js","assets/Cm6zyWkK.js","assets/CHRN1y-U.js","assets/C6QUepJU.js","assets/BSdRGNX3.js","assets/DUqNDSdr.js","assets/DLBP2KKo.js","assets/sSOnGuQf.js","assets/Cbu7IVzw.js","assets/Dfz69W-R.js","assets/TCaOdwjm.js","assets/BZ8zXGUH.js","assets/CBb8jc7S.js","assets/TqDPlEUT.js"])))=>i.map(i=>d[i]);
import{j as e,S as z,G as R,a as D,C as G,F as M,A as V,m as w,b as U,c as B}from"./DXSTB80B.js";import{a as F,r as o,B as $,R as W,b as p,c as Q}from"./gFfKhp4p.js";import{c as Z}from"./DqliOerU.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(n){if(n.ep)return;n.ep=!0;const u=i(n);fetch(n.href,u)}})();var S={},E=F;S.createRoot=E.createRoot,S.hydrateRoot=E.hydrateRoot;const H="modulepreload",J=function(t){return"/qquizz-mvp1/"+t},N={},h=function(a,i,r){let n=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=Promise.allSettled(i.map(g=>{if(g=J(g),g in N)return;N[g]=!0;const _=g.endsWith(".css"),v=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const f=document.createElement("link");if(f.rel=_?"stylesheet":H,_||(f.as="script"),f.crossOrigin="",f.href=g,l&&f.setAttribute("nonce",l),document.head.appendChild(f),_)return new Promise((q,x)=>{f.addEventListener("load",q),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return n.then(c=>{for(const l of c||[])l.status==="rejected"&&u(l.reason);return a().catch(u)})},Y=({children:t})=>e.jsx(e.Fragment,{children:t}),X=o.forwardRef(({children:t,...a},i)=>e.jsx("button",{ref:i,...a,children:t}));X.displayName="TooltipTrigger";const K=o.forwardRef(({children:t,className:a,...i},r)=>e.jsx("div",{ref:r,className:`z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 ${a}`,...i,children:t}));K.displayName="TooltipContent";const ee={theme:"dark",setTheme:()=>null},te=o.createContext(ee);function ae({children:t,defaultTheme:a="dark",storageKey:i="qquiz-theme",...r}){const[n,u]=o.useState(()=>localStorage.getItem(i)||a);o.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),n==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(g);return}l.classList.add(n)},[n]);const c={theme:n,setTheme:l=>{localStorage.setItem(i,l),u(l)}};return e.jsx(te.Provider,{...r,value:c,children:t})}const ie="https://qkiksxuflgbwpqowdmue.supabase.co",se="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFraWtzeHVmbGdid3Bxb3dkbXVlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDE4NDEwNiwiZXhwIjoyMDg1NzYwMTA2fQ.s-_G3O4c_Lgu0FkvDZAsJoZ7EWxAi9qevqVvx_wOaIg",d=Z(ie,se),P={async signUp(t,a,i){const{data:r,error:n}=await d.auth.signUp({email:t,password:a,options:{data:{username:i}}});if(n)throw n;return r.user&&await this.createProfile(r.user.id,i),r},async signIn(t,a){const{data:i,error:r}=await d.auth.signInWithPassword({email:t,password:a});if(r)throw r;return i},async signInWithGoogle(){const{data:t,error:a}=await d.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(a)throw a;return t},async signOut(){const{error:t}=await d.auth.signOut();if(t)throw t},async getCurrentUser(){const{data:{user:t}}=await d.auth.getUser();return t},async createProfile(t,a){const i=["from-cyan-500 to-blue-600","from-purple-500 to-pink-600","from-green-500 to-emerald-600","from-orange-500 to-red-600"],r=i[Math.floor(Math.random()*i.length)],{error:n}=await d.from("profiles").insert({id:t,username:a,avatar_color:r,xp:0,level:1,league:"bronze",league_points:0,total_games:0,wins:0,losses:0,total_questions:0,correct_answers:0,best_streak:0,total_time_played:0});if(n)throw n},async getProfile(t){const{data:a,error:i}=await d.from("profiles").select("*").eq("id",t).single();return i?null:a},async updateProfile(t,a){const{error:i}=await d.from("profiles").update({...a,updated_at:new Date().toISOString()}).eq("id",t);if(i)throw i}},qe={async createSoloGame(t,a,i){const{data:r,error:n}=await d.from("games").insert({player1_id:t,category:a,mode:"solo",status:"playing",player1_score:0,current_question:0,questions:i}).select().single();if(n)throw n;return r},async updateGameScore(t,a,i,r){const{error:n}=await d.from("games").update({player1_score:i,current_question:r}).eq("id",t);if(n)throw n},async finishGame(t,a){const{error:i}=await d.from("games").update({status:"finished",winner_id:a,finished_at:new Date().toISOString()}).eq("id",t);if(i)throw i},async getGameHistory(t,a=10){const{data:i,error:r}=await d.from("games").select("*").or(`player1_id.eq.${t},player2_id.eq.${t}`).eq("status","finished").order("finished_at",{ascending:!1}).limit(a);if(r)throw r;return i}},Ce={async joinQueue(t,a,i,r=1e3){const{data:n,error:u}=await d.from("matchmaking_queue").insert({user_id:t,mode:a,category:i,rating:r}).select().single();if(u)throw u;return n},async leaveQueue(t){const{error:a}=await d.from("matchmaking_queue").delete().eq("user_id",t);if(a)throw a},async findOpponent(t,a,i=1e3){const{data:r,error:n}=await d.from("matchmaking_queue").select("*").eq("mode",a).neq("user_id",t).gte("rating",i-200).lte("rating",i+200).order("created_at",{ascending:!0}).limit(1).single();return n?null:r},subscribeToQueue(t){return d.channel("matchmaking_queue").on("postgres_changes",{event:"*",schema:"public",table:"matchmaking_queue"},t).subscribe()},subscribeToGame(t,a){return d.channel(`game_${t}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"games",filter:`id=eq.${t}`},a).subscribe()}},L=o.createContext(void 0);function ne({children:t}){const[a,i]=o.useState(null),[r,n]=o.useState(null),[u,c]=o.useState(null),[l,g]=o.useState(!0),_=async y=>{try{const m=await P.getProfile(y);n(m)}catch(m){console.error("Erreur chargement profil:",m)}},v=async()=>{a&&await _(a.id)};o.useEffect(()=>{d.auth.getSession().then(({data:{session:m}})=>{c(m),i((m==null?void 0:m.user)??null),m!=null&&m.user&&_(m.user.id),g(!1)});const{data:{subscription:y}}=d.auth.onAuthStateChange(async(m,b)=>{c(b),i((b==null?void 0:b.user)??null),b!=null&&b.user?await _(b.user.id):n(null),g(!1)});return()=>y.unsubscribe()},[]);const k={user:a,profile:r,session:u,loading:l,signUp:async(y,m,b)=>{g(!0);try{await P.signUp(y,m,b)}finally{g(!1)}},signIn:async(y,m)=>{g(!0);try{await P.signIn(y,m)}finally{g(!1)}},signInWithGoogle:async()=>{await P.signInWithGoogle()},signOut:async()=>{await P.signOut(),i(null),n(null),c(null)},updateProfile:async y=>{a&&(await P.updateProfile(a.id,y),await v())},refreshProfile:v};return e.jsx(L.Provider,{value:k,children:t})}function Ie(){const t=o.useContext(L);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const C=[{id:1,title:"Bienvenue sur QQUIZ PRODIGY",subtitle:"Le quiz qui te rend accro",description:"Défie tes amis, grimpe les classements et deviens une légende du quiz !",icon:z,gradient:"from-violet-600 to-fuchsia-600",image:"/images/logo/Logo_Principal_Neon.png"},{id:2,title:"20+ Catégories",subtitle:"RAP, Football, Netflix, Manga...",description:"Des questions sur tous les sujets tendance. Trouve ta spécialité et domine !",icon:R,gradient:"from-cyan-500 to-blue-600",features:["RAP & Hip-Hop","Football Africain","K-POP","Manga & Anime","Netflix & Séries"]},{id:3,title:"Affronte le Monde",subtitle:"Matchmaking en temps réel",description:"Trouve un adversaire en quelques secondes et prouve que tu es le meilleur !",icon:D,gradient:"from-orange-500 to-red-600",features:["Mode Solo","Duel 1v1","Classé","Tournois"]},{id:4,title:"Gagne des Récompenses",subtitle:"XP, Niveaux, Badges",description:"Chaque partie te rapproche du sommet. Débloque des achievements exclusifs !",icon:G,gradient:"from-yellow-500 to-orange-500",features:["Système de niveaux","6 Ligues à gravir","Badges exclusifs","Classement mondial"]},{id:5,title:"Prêt à jouer ?",subtitle:"Ton aventure commence maintenant",description:"Choisis un pseudo et lance-toi dans l'arène !",icon:M,gradient:"from-green-500 to-emerald-600",isLast:!0}];function re({onComplete:t}){const[a,i]=o.useState(0),[r,n]=o.useState(""),[u,c]=o.useState(!1),l=C[a],g=l.icon,_=()=>{u||(c(!0),a<C.length-1&&i(x=>x+1),setTimeout(()=>c(!1),500))},v=()=>{u||a===0||(c(!0),i(x=>x-1),setTimeout(()=>c(!1),500))},f=()=>{r.trim().length>=3&&(localStorage.setItem("qquiz_username",r.trim()),localStorage.setItem("qquiz_onboarding_complete","true"),t())},q=()=>{localStorage.setItem("qquiz_onboarding_complete","true"),t()};return e.jsxs("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950 flex flex-col",children:[e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx("button",{onClick:q,className:"text-white/50 hover:text-white text-sm font-medium px-4 py-2 rounded-full bg-white/5 hover:bg-white/10 transition-all",children:"Passer"})}),e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:C.map((x,j)=>e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${j===a?"w-8 bg-gradient-to-r from-cyan-400 to-fuchsia-400":j<a?"w-2 bg-white/50":"w-2 bg-white/20"}`},j))}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6 pt-16",children:e.jsx(V,{mode:"wait",children:e.jsxs(w.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.4,ease:"easeOut"},className:"max-w-md w-full text-center",children:[e.jsx(w.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},className:"mb-8",children:l.image?e.jsx("img",{src:l.image,alt:"QQUIZ PRODIGY",className:"w-32 h-32 mx-auto object-contain"}):e.jsx("div",{className:`w-24 h-24 mx-auto rounded-3xl bg-gradient-to-br ${l.gradient} flex items-center justify-center shadow-2xl`,children:e.jsx(g,{className:"w-12 h-12 text-white"})})}),e.jsx(w.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-3xl sm:text-4xl font-black text-white mb-2",children:l.title}),e.jsx(w.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:`text-lg font-semibold bg-gradient-to-r ${l.gradient} bg-clip-text text-transparent mb-4`,children:l.subtitle}),e.jsx(w.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-white/60 mb-8 text-base sm:text-lg",children:l.description}),l.features&&e.jsx(w.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"flex flex-wrap justify-center gap-2 mb-8",children:l.features.map((x,j)=>e.jsx("span",{className:"px-4 py-2 bg-white/10 rounded-full text-white/80 text-sm font-medium",children:x},j))}),l.isLast&&e.jsxs(w.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"mb-8",children:[e.jsx("input",{type:"text",value:r,onChange:x=>n(x.target.value),placeholder:"Ton pseudo...",maxLength:20,className:"w-full px-6 py-4 bg-white/10 border border-white/20 rounded-2xl text-white text-center text-lg font-medium placeholder-white/40 focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 transition-all"}),e.jsx("p",{className:"text-white/40 text-sm mt-2",children:"Minimum 3 caractères"})]})]},a)})}),e.jsxs("div",{className:"p-6 pb-8 flex items-center justify-between",children:[e.jsx("button",{onClick:v,disabled:a===0,className:`p-4 rounded-full transition-all ${a===0?"opacity-0 pointer-events-none":"bg-white/10 text-white hover:bg-white/20"}`,children:e.jsx(U,{className:"w-6 h-6"})}),l.isLast?e.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,disabled:r.trim().length<3,className:`px-8 py-4 rounded-2xl font-bold text-lg transition-all ${r.trim().length>=3?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/50":"bg-white/10 text-white/50 cursor-not-allowed"}`,children:"C'est parti !"}):e.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:_,className:`px-8 py-4 rounded-2xl bg-gradient-to-r ${l.gradient} text-white font-bold text-lg shadow-lg flex items-center gap-2`,children:["Suivant",e.jsx(B,{className:"w-5 h-5"})]}),e.jsx("div",{className:"w-14"})]})]})}const I="/qquizz-mvp1/";function s(t){if(t.startsWith("http://")||t.startsWith("https://"))return t;const a=t.startsWith("/")?t.slice(1):t;return(I.endsWith("/")?I:I+"/")+a}s("/images/logo/Logo_Principal_Neon.png"),s("/images/logo/Logo_Principal_Neon.png"),s("/images/badges/Badge_Bronze.png"),s("/images/badges/Badge_Argent.png"),s("/images/badges/Badge_Or.png"),s("/images/badges/Badge_Platine.png"),s("/images/badges/Badge_Diamant.png"),s("/images/badges/Badge_Legende.png"),s("/images/categories/Cat_Rap.png"),s("/images/categories/Cat_TikTok.png"),s("/images/categories/Cat_Kpop.png"),s("/images/categories/Cat_FootballAfricain.png"),s("/images/categories/Cat_GamingPro.png"),s("/images/categories/Cat_Youtube.png"),s("/images/categories/Cat_Mode.png"),s("/images/categories/Cat_Afrique.png"),s("/images/categories/Cat_Afrobeats.png"),s("/images/categories/Cat_NBA.png"),s("/images/categories/Cat_Manga.png"),s("/images/categories/Cat_Marvel.png"),s("/images/categories/Cat_Netflix.png"),s("/images/categories/Cat_Celebrites.png"),s("/images/categories/Cat_Crypto.png"),s("/images/categories/Cat_Sport.png"),s("/images/categories/Cat_Science.png"),s("/images/categories/Cat_Culture.png"),s("/images/categories/Cat_Tech.png"),s("/images/categories/Cat_Cinema.png"),s("/images/categories/Cat_Musique.png"),s("/images/categories/Cat_Geographie.png"),s("/images/categories/Cat_Histoire.png"),s("/images/categories/Cat_Football.png"),s("/images/categories/Cat_Jeux_Video.png"),s("/images/questions/bg_rap.png"),s("/images/questions/bg_football.png"),s("/images/questions/bg_manga.png"),s("/images/questions/bg_netflix.png"),s("/images/questions/bg_crypto.png"),s("/images/questions/bg_kpop.png"),s("/images/questions/bg_afrobeats.png"),s("/images/questions/bg_nba.png"),s("/images/questions/bg_marvel.png"),s("/images/questions/bg_gaming.png"),s("/images/questions/bg_tiktok.png"),s("/images/questions/bg_afrique.png"),s("/images/questions/bg_youtube.png"),s("/images/questions/bg_mode.png"),s("/images/questions/bg_celebrites.png");const oe=o.lazy(()=>h(()=>import("./DrymYHtk.js"),__vite__mapDeps([0,1,2,3,4,5]))),le=o.lazy(()=>h(()=>import("./P-cpHFxZ.js"),__vite__mapDeps([6,1,2]))),ce=o.lazy(()=>h(()=>import("./Cm6zyWkK.js"),__vite__mapDeps([7,1,2]))),ue=o.lazy(()=>h(()=>import("./CHRN1y-U.js"),__vite__mapDeps([8,1,2]))),A=o.lazy(()=>h(()=>import("./C6QUepJU.js"),__vite__mapDeps([9,1,2,10,11,5]))),ge=o.lazy(()=>h(()=>import("./DLBP2KKo.js"),__vite__mapDeps([12,1,2,11]))),de=o.lazy(()=>h(()=>import("./sSOnGuQf.js"),__vite__mapDeps([13,1,2,11]))),me=o.lazy(()=>h(()=>import("./Cbu7IVzw.js"),__vite__mapDeps([14,1,2]))),pe=o.lazy(()=>h(()=>import("./Dfz69W-R.js"),__vite__mapDeps([15,1,2,5]))),he=o.lazy(()=>h(()=>import("./TCaOdwjm.js"),__vite__mapDeps([16,1,2,4,5]))),fe=o.lazy(()=>h(()=>import("./BZ8zXGUH.js"),__vite__mapDeps([17,1,2,5]))),xe=o.lazy(()=>h(()=>import("./CBb8jc7S.js"),__vite__mapDeps([18,1,2,5]))),_e=o.lazy(()=>h(()=>import("./TqDPlEUT.js"),__vite__mapDeps([19,1,2,3,10,5]))),be=o.lazy(()=>h(()=>import("./P-cpHFxZ.js"),__vite__mapDeps([6,1,2])));function T(){return e.jsx("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-20 h-20 mx-auto mb-4 relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-violet-500/30 animate-ping"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-violet-500 border-r-fuchsia-500 border-b-cyan-500 border-l-transparent animate-spin"}),e.jsx("img",{src:s("/images/logo/Logo_Principal_Neon.png"),alt:"QQUIZ PRODIGY",className:"absolute inset-2 w-16 h-16 object-contain"})]}),e.jsx("p",{className:"text-white/60 text-sm",children:"Chargement..."})]})})}function ye(){const[t,a]=o.useState(!1),[i,r]=o.useState(!0);o.useEffect(()=>{localStorage.getItem("qquiz_onboarding_complete")||a(!0),r(!1)},[]);const n=()=>{a(!1)};return i?e.jsx(T,{}):e.jsx(ae,{defaultTheme:"dark",children:e.jsx(ne,{children:e.jsxs(Y,{children:[t&&e.jsx(re,{onComplete:n}),e.jsx($,{children:e.jsx(o.Suspense,{fallback:e.jsx(T,{}),children:e.jsxs(W,{children:[e.jsx(p,{path:"/",element:e.jsx(oe,{})}),e.jsx(p,{path:"/auth",element:e.jsx(pe,{})}),e.jsx(p,{path:"/feed",element:e.jsx(he,{})}),e.jsx(p,{path:"/chat",element:e.jsx(le,{})}),e.jsx(p,{path:"/friends",element:e.jsx(ce,{})}),e.jsx(p,{path:"/duel",element:e.jsx(ue,{})}),e.jsx(p,{path:"/play",element:e.jsx(A,{})}),e.jsx(p,{path:"/quiz",element:e.jsx(A,{})}),e.jsx(p,{path:"/game-mode",element:e.jsx(me,{})}),e.jsx(p,{path:"/leaderboard",element:e.jsx(ge,{})}),e.jsx(p,{path:"/profile",element:e.jsx(de,{})}),e.jsx(p,{path:"/settings",element:e.jsx(fe,{})}),e.jsx(p,{path:"/challenges",element:e.jsx(xe,{})}),e.jsx(p,{path:"/matchmaking",element:e.jsx(_e,{mode:"random",onCancel:()=>window.history.back(),onMatchFound:(u,c)=>console.log("Match found:",u,c)})}),e.jsx(p,{path:"/messages",element:e.jsx(be,{})})]})})})]})})})}const O=document.getElementById("root");O?S.createRoot(O).render(e.jsx(Q.StrictMode,{children:e.jsx(ye,{})})):console.error("Root element not found");export{qe as a,s as g,Ce as m,d as s,Ie as u};
