import{j as e,i as O,k as I,A as u,m as o,l as K,n as P,o as B,Z as z,p as C}from"./DXSTB80B.js";import{u as F,d as V,r as l}from"./gFfKhp4p.js";const _=[{emoji:"ðŸ”¥",label:"Feu"},{emoji:"ðŸ’ª",label:"GG"},{emoji:"ðŸ˜‚",label:"MDR"},{emoji:"ðŸ‘",label:"Bravo"},{emoji:"ðŸ˜¤",label:"Revanche"},{emoji:"ðŸ§ ",label:"Big Brain"},{emoji:"ðŸ’€",label:"Dead"},{emoji:"ðŸ‘‘",label:"King"}],H=["GG bien jouÃ© !","Revanche ? ðŸ”¥","T'es trop fort !","La prochaine c'est pour moi","On refait ?","Bien jouÃ© le combo !"],p=[{id:"1",name:"KingQuiz243",avatar:"KingQuiz243",lastMessage:"GG bien jouÃ© ! ðŸ”¥",lastTime:new Date(Date.now()-12e4),unread:2,online:!0,level:15,league:"Or"},{id:"2",name:"ProdigyMaster",avatar:"ProdigyMaster",lastMessage:"Revanche en RAP ?",lastTime:new Date(Date.now()-36e5),unread:0,online:!0,level:22,league:"Diamant"},{id:"3",name:"BrainStorm",avatar:"BrainStorm",lastMessage:"Tu m'as dÃ©truit en Science ðŸ˜‚",lastTime:new Date(Date.now()-72e5),unread:1,online:!1,level:18,league:"Platine"},{id:"4",name:"QuizNinja",avatar:"QuizNinja",lastMessage:"On fait une partie ?",lastTime:new Date(Date.now()-864e5),unread:0,online:!1,level:10,league:"Argent"},{id:"5",name:"LeopardKin",avatar:"LeopardKin",lastMessage:"Score: 180 vs 120 ðŸ’ª",lastTime:new Date(Date.now()-1728e5),unread:0,online:!0,level:25,league:"LÃ©gende"}];function Z(){const m=F();V();const[d,f]=l.useState(null),[N,x]=l.useState([]),[b,v]=l.useState(""),[g,y]=l.useState(!1),[T,M]=l.useState(null),[$,h]=l.useState(!1),[w,L]=l.useState(""),[S,E]=l.useState(!1),k=l.useRef(null),R=l.useRef(null),a=p.find(t=>t.id===d);l.useEffect(()=>{var t;(t=k.current)==null||t.scrollIntoView({behavior:"smooth"})},[N]),l.useEffect(()=>{if(d){const t=p.find(i=>i.id===d);t&&x([{id:"sys1",senderId:"system",senderName:"SystÃ¨me",senderAvatar:"",content:`RÃ©sultat du duel : ${t.name} vs Toi`,messageType:"result",timestamp:new Date(Date.now()-6e5),isOwn:!1,gameResult:{winner:Math.random()>.5?"Toi":t.name,score1:Math.floor(Math.random()*100)+80,score2:Math.floor(Math.random()*100)+60,category:["RAP","Sport","Manga","Netflix","NBA"][Math.floor(Math.random()*5)]}},{id:"1",senderId:t.id,senderName:t.name,senderAvatar:t.avatar,content:t.lastMessage,messageType:"text",timestamp:t.lastTime,isOwn:!1,reactions:[{emoji:"ðŸ”¥",userId:"me"}]}]);const s=setTimeout(()=>{h(!0),setTimeout(()=>h(!1),2e3)},3e3);return()=>clearTimeout(s)}},[d]);const j=t=>{const s=t||b.trim();if(!s)return;const i={id:Date.now().toString(),senderId:"me",senderName:"Toi",senderAvatar:"You",content:s,messageType:"text",timestamp:new Date,isOwn:!0};x(r=>[...r,i]),v(""),y(!1),setTimeout(()=>{h(!0),setTimeout(()=>{h(!1);const r=["Haha bien jouÃ© ! ðŸ”¥","On refait ? Je suis chaud","T'es fort en vrai ðŸ’ª","La prochaine c'est pour moi !","GG ! Tu gÃ¨res"],n={id:(Date.now()+1).toString(),senderId:d||"",senderName:(a==null?void 0:a.name)||"",senderAvatar:(a==null?void 0:a.avatar)||"",content:r[Math.floor(Math.random()*r.length)],messageType:"text",timestamp:new Date,isOwn:!1};x(c=>[...c,n])},1500+Math.random()*2e3)},500)},U=(t,s)=>{x(i=>i.map(r=>{if(r.id===t){const n=r.reactions||[],c=n.findIndex(G=>G.userId==="me");return c>=0?n[c]={emoji:s,userId:"me"}:n.push({emoji:s,userId:"me"}),{...r,reactions:n}}return r})),M(null)},Q=t=>{var n;const s=(n=t.target.files)==null?void 0:n[0];if(!s)return;const i=URL.createObjectURL(s),r={id:Date.now().toString(),senderId:"me",senderName:"Toi",senderAvatar:"You",content:"",messageType:"image",mediaUrl:i,timestamp:new Date,isOwn:!0};x(c=>[...c,r])},D=t=>{const i=new Date().getTime()-t.getTime();return i<6e4?"maintenant":i<36e5?`${Math.floor(i/6e4)}min`:i<864e5?t.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},A=t=>({Bronze:"text-amber-600",Argent:"text-gray-400",Or:"text-yellow-400",Platine:"text-cyan-400",Diamant:"text-blue-400",LÃ©gende:"text-purple-400"})[t]||"text-gray-400";return d?e.jsxs("div",{className:"flex flex-col h-screen h-[100dvh] bg-gradient-to-br from-slate-950 via-purple-950/30 to-slate-950",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-slate-950/80 backdrop-blur-xl border-b border-white/5",children:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5",children:[e.jsx("button",{onClick:()=>f(null),className:"p-2 -ml-1 rounded-xl hover:bg-white/5 transition-colors",children:e.jsx(O,{className:"w-5 h-5 text-white/70"})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${a==null?void 0:a.avatar}`,alt:a==null?void 0:a.name,className:"w-9 h-9 rounded-full"}),(a==null?void 0:a.online)&&e.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-slate-950"})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-bold text-white text-sm truncate",children:a==null?void 0:a.name}),e.jsxs("p",{className:"text-[10px] text-green-400",children:[a!=null&&a.online?"En ligne":"Hors ligne"," Â· ",e.jsxs("span",{className:A((a==null?void 0:a.league)||""),children:["Niv.",a==null?void 0:a.level," ",a==null?void 0:a.league]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>m(`/play?opponent=${a==null?void 0:a.name}`),className:"p-2 rounded-xl bg-violet-500/20 hover:bg-violet-500/30 transition-colors",children:e.jsx(K,{className:"w-4 h-4 text-violet-400"})}),e.jsx("button",{className:"p-2 rounded-xl hover:bg-white/5 transition-colors",children:e.jsx(P,{className:"w-4 h-4 text-white/50"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-3 space-y-2",children:[N.map(t=>e.jsxs("div",{children:[t.messageType==="result"&&t.gameResult&&e.jsx(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mx-auto max-w-[280px] mb-4",children:e.jsxs("div",{className:"bg-gradient-to-r from-violet-500/10 to-fuchsia-500/10 border border-violet-500/20 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-[10px] text-violet-400 font-medium mb-2",children:"RÃ‰SULTAT DU DUEL"}),e.jsx("div",{className:"text-xs text-white/50 mb-2",children:t.gameResult.category}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-black text-white",children:t.gameResult.score1}),e.jsx("div",{className:"text-[10px] text-white/40",children:"Toi"})]}),e.jsx("div",{className:"text-xs text-white/20 font-bold",children:"VS"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-black text-white/60",children:t.gameResult.score2}),e.jsx("div",{className:"text-[10px] text-white/40",children:a==null?void 0:a.name})]})]}),e.jsx("div",{className:`text-xs font-bold ${t.gameResult.winner==="Toi"?"text-green-400":"text-red-400"}`,children:t.gameResult.winner==="Toi"?"Victoire !":"DÃ©faite"}),e.jsx("button",{onClick:()=>{var s;return m(`/play?category=${(s=t.gameResult)==null?void 0:s.category}`)},className:"mt-3 w-full py-2 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-xl text-white text-xs font-bold hover:opacity-90 transition-opacity",children:"Revanche"})]})}),(t.messageType==="text"||t.messageType==="image")&&e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-2 ${t.isOwn?"flex-row-reverse":"flex-row"}`,children:[!t.isOwn&&e.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.senderAvatar}`,alt:"",className:"w-7 h-7 rounded-full flex-shrink-0 mt-1"}),e.jsxs("div",{className:`flex flex-col ${t.isOwn?"items-end":"items-start"} max-w-[75%]`,children:[e.jsxs("div",{className:`relative rounded-2xl px-3.5 py-2 ${t.isOwn?"bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white rounded-br-md":"bg-white/8 text-white rounded-bl-md"}`,onDoubleClick:()=>M(T===t.id?null:t.id),children:[t.messageType==="text"&&e.jsx("p",{className:"text-[13px] leading-relaxed",children:t.content}),t.messageType==="image"&&t.mediaUrl&&e.jsx("img",{src:t.mediaUrl,alt:"",className:"rounded-xl max-w-full max-h-[200px] object-cover"})]}),t.reactions&&t.reactions.length>0&&e.jsx("div",{className:`flex gap-0.5 mt-0.5 ${t.isOwn?"mr-1":"ml-1"}`,children:t.reactions.map((s,i)=>e.jsx("span",{className:"text-xs bg-white/10 rounded-full px-1.5 py-0.5",children:s.emoji},i))}),e.jsx(u,{children:T===t.id&&e.jsx(o.div,{initial:{opacity:0,scale:.8,y:5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},className:"flex gap-1 mt-1 bg-slate-800 rounded-full px-2 py-1 border border-white/10",children:_.map(s=>e.jsx("button",{onClick:()=>U(t.id,s.emoji),className:"hover:scale-125 transition-transform p-0.5",children:e.jsx("span",{className:"text-sm",children:s.emoji})},s.emoji))})}),e.jsx("span",{className:"text-[10px] text-white/20 mt-0.5 px-1",children:D(t.timestamp)})]})]})]},t.id)),e.jsx(u,{children:$&&e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-2",children:[e.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${a==null?void 0:a.avatar}`,alt:"",className:"w-7 h-7 rounded-full"}),e.jsx("div",{className:"bg-white/8 rounded-2xl rounded-bl-md px-4 py-2.5",children:e.jsx("div",{className:"flex gap-1",children:[0,1,2].map(t=>e.jsx(o.div,{className:"w-1.5 h-1.5 bg-white/40 rounded-full",animate:{y:[0,-4,0]},transition:{duration:.6,repeat:1/0,delay:t*.15}},t))})})]})}),e.jsx("div",{ref:k})]}),e.jsx(u,{children:g&&e.jsx(o.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-white/5 bg-slate-950/50 backdrop-blur-xl",children:e.jsx("div",{className:"flex flex-wrap gap-2 p-3",children:H.map((t,s)=>e.jsx("button",{onClick:()=>j(t),className:"px-3 py-1.5 bg-violet-500/15 border border-violet-500/20 rounded-full text-xs text-violet-300 hover:bg-violet-500/25 transition-colors",children:t},s))})})}),e.jsx("div",{className:"border-t border-white/5 bg-slate-950/80 backdrop-blur-xl p-3 safe-area-bottom",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:R,onChange:Q,accept:"image/*",className:"hidden"}),e.jsx("button",{onClick:()=>{var t;return(t=R.current)==null?void 0:t.click()},className:"p-2 rounded-xl hover:bg-white/5 transition-colors",children:e.jsx(B,{className:"w-5 h-5 text-white/40"})}),e.jsx("button",{onClick:()=>y(!g),className:`p-2 rounded-xl transition-colors ${g?"bg-violet-500/20 text-violet-400":"hover:bg-white/5 text-white/40"}`,children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",value:b,onChange:t=>v(t.target.value),onKeyDown:t=>t.key==="Enter"&&j(),placeholder:"Message...",className:"w-full bg-white/5 border border-white/10 text-white rounded-full px-4 py-2.5 text-sm placeholder:text-white/25 focus:outline-none focus:border-violet-500/50 transition-colors"})}),e.jsx(o.button,{whileTap:{scale:.9},onClick:()=>j(),disabled:!b.trim(),className:"p-2.5 rounded-full bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white disabled:opacity-30 transition-opacity shadow-lg shadow-violet-500/20",children:e.jsx(C,{className:"w-4 h-4"})})]})})]}):e.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-gradient-to-br from-slate-950 via-purple-950/50 to-slate-950",children:[e.jsxs("div",{className:"sticky top-0 z-50 bg-slate-950/80 backdrop-blur-xl border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("button",{onClick:()=>m("/"),className:"p-2 -ml-2 rounded-xl hover:bg-white/5 transition-colors",children:e.jsx(O,{className:"w-5 h-5 text-white/70"})}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Messages"}),e.jsx("button",{onClick:()=>E(!S),className:"p-2 -mr-2 rounded-xl hover:bg-white/5 transition-colors",children:e.jsx(I,{className:"w-5 h-5 text-white/70"})})]}),e.jsx(u,{children:S&&e.jsx(o.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30"}),e.jsx("input",{type:"text",value:w,onChange:t=>L(t.target.value),placeholder:"Rechercher un joueur...",className:"w-full bg-white/5 border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-white text-sm placeholder:text-white/30 focus:outline-none focus:border-violet-500/50",autoFocus:!0})]})})})]}),e.jsx("div",{className:"px-4 py-3 border-b border-white/5",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-1",children:p.filter(t=>t.online).map(t=>e.jsxs("button",{onClick:()=>f(t.id),className:"flex flex-col items-center gap-1 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.avatar}`,alt:t.name,className:"w-14 h-14 rounded-full border-2 border-violet-500/50"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 rounded-full border-2 border-slate-950"})]}),e.jsx("span",{className:"text-[10px] text-white/60 max-w-[60px] truncate",children:t.name})]},t.id))})}),e.jsx("div",{className:"divide-y divide-white/5",children:p.filter(t=>!w||t.name.toLowerCase().includes(w.toLowerCase())).map((t,s)=>e.jsxs(o.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.05},onClick:()=>f(t.id),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 transition-colors active:bg-white/10",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.avatar}`,alt:t.name,className:"w-12 h-12 rounded-full"}),t.online&&e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-950"})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-white text-sm truncate",children:t.name}),e.jsxs("span",{className:`text-[10px] font-bold ${A(t.league)}`,children:["Niv.",t.level]})]}),e.jsx("p",{className:"text-xs text-white/40 truncate mt-0.5",children:t.lastMessage})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[e.jsx("span",{className:"text-[10px] text-white/30",children:D(t.lastTime)}),t.unread>0&&e.jsx("span",{className:"min-w-[18px] h-[18px] flex items-center justify-center bg-violet-500 text-white text-[10px] font-bold rounded-full px-1",children:t.unread})]})]},t.id))}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-950/90 backdrop-blur-xl border-t border-white/5 px-2 py-2 safe-area-bottom",children:e.jsx("div",{className:"flex justify-around items-center max-w-lg mx-auto",children:[{icon:"ðŸ ",label:"Accueil",path:"/"},{icon:"ðŸ“°",label:"Feed",path:"/feed"},{icon:"ðŸŽ®",label:"Jouer",path:"/game-mode",isMain:!0},{icon:"ðŸ’¬",label:"Chat",path:"/chat",active:!0},{icon:"ðŸ‘¤",label:"Profil",path:"/profile"}].map(t=>e.jsxs("button",{onClick:()=>m(t.path),className:`flex flex-col items-center gap-0.5 px-3 py-1 rounded-xl transition-all ${t.active?"text-violet-400":"text-white/40 hover:text-white/60"} ${t.isMain?"relative -top-3":""}`,children:[t.isMain?e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-violet-600 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/30",children:e.jsx("span",{className:"text-lg",children:t.icon})}):e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"text-[10px] font-medium",children:t.label})]},t.path))})})]})}export{Z as default};
